/* Frappe Gantt base styles */
:root{--g-arrow-color: #1f2937;--g-bar-color: #fff;--g-bar-border: #fff;--g-tick-color-thick: #ededed;--g-tick-color: #f3f3f3;--g-actions-background: #f3f3f3;--g-border-color: #ebeff2;--g-text-muted: #7c7c7c;--g-text-light: #fff;--g-text-dark: #171717;--g-progress-color: #dbdbdb;--g-handle-color: #37352f;--g-weekend-label-color: #dcdce4;--g-expected-progress: #c4c4e9;--g-header-background: #fff;--g-row-color: #fdfdfd;--g-row-border-color: #c7c7c7;--g-today-highlight: #37352f;--g-popup-actions: #ebeff2;--g-weekend-highlight-color: #f7f7f7}.gantt-container{line-height:14.5px;position:relative;overflow:auto;font-size:12px;height:var(--gv-grid-height);width:100%;border-radius:8px}.gantt-container .popup-wrapper{position:absolute;top:0;left:0;background:#fff;box-shadow:0 10px 24px -3px #0003;padding:10px;border-radius:5px;width:max-content;z-index:1000}.gantt-container .popup-wrapper .title{margin-bottom:2px;color:var(--g-text-dark);font-size:.85rem;font-weight:650;line-height:15px}.gantt-container .popup-wrapper .subtitle{color:var(--g-text-dark);font-size:.8rem;margin-bottom:5px}.gantt-container .popup-wrapper .details{color:var(--g-text-muted);font-size:.7rem}.gantt-container .popup-wrapper .actions{margin-top:10px;margin-left:3px}.gantt-container .popup-wrapper .action-btn{border:none;padding:5px 8px;background-color:var(--g-popup-actions);border-right:1px solid var(--g-text-light)}.gantt-container .popup-wrapper .action-btn:hover{background-color:brightness(97%)}.gantt-container .popup-wrapper .action-btn:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px}.gantt-container .popup-wrapper .action-btn:last-child{border-right:none;border-top-right-radius:4px;border-bottom-right-radius:4px}.gantt-container .grid-header{height:calc(var(--gv-lower-header-height) + var(--gv-upper-header-height) + 10px);background-color:var(--g-header-background);position:sticky;top:0;left:0;border-bottom:1px solid var(--g-row-border-color);z-index:1000}.gantt-container .lower-text,.gantt-container .upper-text{text-anchor:middle}.gantt-container .upper-header{height:var(--gv-upper-header-height)}.gantt-container .lower-header{height:var(--gv-lower-header-height)}.gantt-container .lower-text{font-size:12px;position:absolute;width:calc(var(--gv-column-width) * .8);height:calc(var(--gv-lower-header-height) * .8);margin:0 calc(var(--gv-column-width) * .1);align-content:center;text-align:center;color:var(--g-text-muted)}.gantt-container .upper-text{position:absolute;width:fit-content;font-weight:500;font-size:14px;color:var(--g-text-dark);height:calc(var(--gv-lower-header-height) * .66)}.gantt-container .current-upper{position:sticky;left:0!important;padding-left:17px;background:#fff}.gantt-container .side-header{position:sticky;top:0;right:0;float:right;z-index:1000;line-height:20px;font-weight:400;width:max-content;margin-left:auto;padding-right:10px;padding-top:10px;background:var(--g-header-background);display:flex}.gantt-container .side-header *{transition-property:background-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;background-color:var(--g-actions-background);text-align:-webkit-center;border-radius:.5rem;border:none;padding:5px 8px;color:var(--g-text-dark);font-size:14px;letter-spacing:.02em;font-weight:420;box-sizing:content-box;margin-right:5px}.gantt-container .side-header *:last-child{margin-right:0}.gantt-container .side-header *:hover{filter:brightness(97.5%)}.gantt-container .side-header select{padding-right:1.25rem;width:50px}.gantt-container .date-range-highlight{background-color:var(--g-progress-color);border-radius:12px;height:calc(var(--gv-lower-header-height) - 6px);top:calc(var(--gv-upper-header-height) + 5px);position:absolute}.gantt-container .current-highlight{position:absolute;background:var(--g-today-highlight);width:1px;z-index:999}.gantt-container .current-ball-highlight{position:absolute;background:var(--g-today-highlight);z-index:1001;border-radius:50%}.gantt-container .current-date-highlight{background:var(--g-today-highlight);color:var(--g-text-light);border-radius:5px}.gantt-container .holiday-label{position:absolute;top:0;left:0;opacity:0;z-index:1000;background:--g-weekend-label-color;border-radius:5px;padding:2px 5px}.gantt-container .holiday-label.show{opacity:100}.gantt-container .extras{position:sticky;left:0}.gantt-container .extras .adjust{position:absolute;left:8px;top:calc(var(--gv-grid-height) - 60px);background-color:#000000b3;color:#fff;border:none;padding:8px;border-radius:3px}.gantt-container .hide{display:none}.gantt{user-select:none;-webkit-user-select:none;position:absolute}.gantt .grid-background{fill:none}.gantt .grid-row{fill:var(--g-row-color)}.gantt .row-line{stroke:var(--g-border-color)}.gantt .tick{stroke:var(--g-tick-color);stroke-width:.4}.gantt .tick.thick{stroke:var(--g-tick-color-thick);stroke-width:.7}.gantt .arrow{fill:none;stroke:var(--g-arrow-color);stroke-width:1.5}.gantt .bar-wrapper .bar{fill:var(--g-bar-color);stroke:var(--g-bar-border);stroke-width:0;transition:stroke-width .3s ease}.gantt .bar-progress{fill:var(--g-progress-color);border-radius:4px}.gantt .bar-expected-progress{fill:var(--g-expected-progress)}.gantt .bar-invalid{fill:transparent;stroke:var(--g-bar-border);stroke-width:1;stroke-dasharray:5}:is(.gantt .bar-invalid)~.bar-label{fill:var(--g-text-light)}.gantt .bar-label{fill:var(--g-text-dark);dominant-baseline:central;font-family:Helvetica;font-size:13px;font-weight:400}.gantt .bar-label.big{fill:var(--g-text-dark);text-anchor:start}.gantt .handle{fill:var(--g-handle-color);opacity:0;transition:opacity .3s ease}.gantt .handle.active,.gantt .handle.visible{cursor:ew-resize;opacity:1}.gantt .handle.progress{fill:var(--g-text-muted)}.gantt .bar-wrapper{cursor:pointer}.gantt .bar-wrapper .bar{outline:1px solid var(--g-row-border-color);border-radius:3px}.gantt .bar-wrapper:hover .bar{transition:transform .3s ease}.gantt .bar-wrapper:hover .date-range-highlight{display:block}

/* Custom CSS for medical shift Gantt chart visualization */

/* Gantt container styling */
.medical-gantt-container {
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.medical-gantt-header {
  padding: 1.5rem;
  border-bottom: 1px solid #e5e7eb;
  background: #f9fafb;
}

.medical-gantt-content {
  padding: 1rem;
}

/* Override default Frappe Gantt styles */
.gantt-container {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  border: none;
}

.gantt .grid-header {
  background: #f8fafc;
  border-bottom: 2px solid #e2e8f0;
  font-weight: 600;
  color: #374151;
}

.gantt .grid-row {
  border-bottom: 1px solid #f1f5f9;
}

.gantt .grid-row:hover {
  background: #f8fafc;
}

/* Shift type specific colors - colorblind-safe palette */
.gantt .bar.shift-zi {
  fill: #1E88E5; /* Blue - day shifts */
  stroke: #1565C0;
}

.gantt .bar.shift-dupa_amiaza {
  fill: #8E24AA; /* Purple - afternoon shifts */
  stroke: #6A1B9A;
}

.gantt .bar.shift-garda_zi {
  fill: #43A047; /* Green - day guards */
  stroke: #2E7D32;
}

.gantt .bar.shift-noapte {
  fill: #FB8C00; /* Orange - night shifts */
  stroke: #E65100;
}

.gantt .bar.shift-garda_24 {
  fill: #E53935; /* Red - 24h guards */
  stroke: #C62828;
}

/* Staff type differentiation */
.gantt .bar.staff-medic {
  height: 24px;
  border-radius: 4px;
}

.gantt .bar.staff-asistent {
  height: 20px;
  border-radius: 3px;
}

.gantt .bar.staff-infirmier {
  height: 18px;
  border-radius: 2px;
}

/* Role-based styling */
.gantt .bar.role-admin {
  stroke-width: 3px;
  stroke-dasharray: none;
}

.gantt .bar.role-manager {
  stroke-width: 2px;
  stroke-dasharray: 2,2;
}

.gantt .bar.role-staff {
  stroke-width: 1px;
}

/* Department-based patterns */
.gantt .bar.dept-urgente {
  background-image: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 2px,
    rgba(255, 255, 255, 0.1) 2px,
    rgba(255, 255, 255, 0.1) 4px
  );
}

.gantt .bar.dept-chirurgie {
  background-image: repeating-linear-gradient(
    90deg,
    transparent,
    transparent 2px,
    rgba(255, 255, 255, 0.1) 2px,
    rgba(255, 255, 255, 0.1) 4px
  );
}

.gantt .bar.dept-ati {
  border-left: 4px solid #dc2626;
}

.gantt .bar.dept-pediatrie {
  border-radius: 8px;
}

/* Hover effects */
.gantt .bar:hover {
  opacity: 0.9;
  cursor: pointer;
  transform: translateY(-1px);
  transition: all 0.2s ease;
}

/* Today marker */
.gantt .today-highlight {
  background: rgba(59, 130, 246, 0.1);
  border-left: 2px solid #3B82F6;
}

/* Grid lines */
.gantt .grid-line {
  stroke: #e5e7eb;
  stroke-width: 1px;
}

.gantt .grid-line.thick {
  stroke: #d1d5db;
  stroke-width: 2px;
}

/* Custom tooltips */
.gantt-tooltip {
  background: #1f2937;
  color: white;
  border: none;
  border-radius: 6px;
  padding: 8px 12px;
  font-size: 12px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  z-index: 1000;
}

.gantt-tooltip::before {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: #1f2937 transparent transparent transparent;
}

/* Legend styles */
.gantt-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-top: 1rem;
  padding: 1rem;
  background: #f8fafc;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
}

.gantt-legend-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
  color: #374151;
}

.gantt-legend-color {
  width: 16px;
  height: 16px;
  border-radius: 3px;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

/* Responsive design */
@media (max-width: 768px) {
  .medical-gantt-container {
    border-radius: 0;
    margin: 0 -1rem;
  }
  
  .medical-gantt-header {
    padding: 1rem;
  }
  
  .medical-gantt-content {
    padding: 0.5rem;
  }
  
  .gantt .bar {
    height: 16px;
  }
  
  .gantt-legend {
    flex-direction: column;
    gap: 0.5rem;
  }
}

/* View mode specific adjustments */
.gantt-view-day .gantt .bar {
  min-width: 20px;
}

.gantt-view-week .gantt .bar {
  min-width: 4px;
}

.gantt-view-month .gantt .bar {
  min-width: 2px;
}

/* Shift overlap indicators */
.gantt .bar.shift-overlap {
  border: 2px solid #f59e0b;
  background: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 3px,
    rgba(245, 158, 11, 0.2) 3px,
    rgba(245, 158, 11, 0.2) 6px
  );
}

/* Insufficient staffing warning */
.gantt .bar.understaffed {
  border: 2px solid #ef4444;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* Night shift special styling */
.gantt .bar.night-shift {
  background: linear-gradient(135deg, #1e293b, #334155);
  border: 1px solid #64748b;
}

/* 24-hour shift special styling */
.gantt .bar.full-day-shift {
  background: linear-gradient(90deg, #dc2626, #ef4444, #dc2626);
  border: 2px solid #991b1b;
  height: 28px;
}

/* Loading state */
.gantt-loading {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 200px;
  color: #6b7280;
}

.gantt-loading::after {
  content: '';
  width: 20px;
  height: 20px;
  border: 2px solid #e5e7eb;
  border-top: 2px solid #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-left: 8px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Empty state */
.gantt-empty {
  text-align: center;
  padding: 3rem;
  color: #6b7280;
}

.gantt-empty-icon {
  width: 48px;
  height: 48px;
  margin: 0 auto 1rem;
  opacity: 0.5;
}

/* Error state */
.gantt-error {
  background: #fef2f2;
  border: 1px solid #fecaca;
  border-radius: 8px;
  padding: 1rem;
  color: #dc2626;
  text-align: center;
}

/* Enhanced Gantt improvements for better visualization */
.gantt-enhanced-grid {
  min-height: 80px;
}

.gantt-day-weekend {
  background-color: #f8f9fa !important;
}

.gantt-day-today {
  background-color: #e8f4fd !important;
  border-left: 3px solid #1e88e5;
}

.gantt-shift-bar-enhanced {
  min-height: 24px;
  border-radius: 6px;
  font-weight: 600;
  text-shadow: 0 1px 2px rgba(0,0,0,0.2);
  transition: all 0.2s ease;
}

.gantt-shift-bar-enhanced:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  z-index: 10;
}

/* Improved focus states */
.gantt-shift-bar-enhanced:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

/* Better overflow handling */
.gantt-overflow-indicator {
  position: absolute;
  bottom: 2px;
  right: 2px;
  background: rgba(0,0,0,0.7);
  color: white;
  font-size: 10px;
  padding: 1px 4px;
  border-radius: 2px;
  font-weight: bold;
}